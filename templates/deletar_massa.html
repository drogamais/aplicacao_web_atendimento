{% extends "base.html" %}

{% block title %}Deletar Lançamentos em Massa{% endblock %}

{% block content %}
    <h1>Lixeira - Lançamentos em Massa</h1>
    <p>
        Abaixo estão os lançamentos em massa ativos.
        <br>
        Ao selecionar e mover para a lixeira, os registros associados ficarão <strong>inativos</strong>,
        mas <strong>não serão permanentemente removidos</strong> e poderão ser recuperados pela equipe de TI.
    </p>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    {% if atendimentos %}
    <form action="{{ url_for('executar_delecao_massa') }}" method="post" onsubmit="return confirm('Você tem certeza que deseja mover os registros selecionados para a lixeira?');">
        <table>
            <thead>
                <tr>
                    <th>Deletar?</th>
                    <th>Data</th>
                    <th>Tarefa</th>
                    <th>Responsável</th>
                    <th>Nº Lojas</th>
                    <th>Assunto</th>
                </tr>
            </thead>
            <tbody>
                {% for atendimento in atendimentos %}
                <tr>
                    <td>
                        <input type="checkbox" name="selecionado" value="{{ atendimento.chave_id }}">
                    </td>
                    <td>{{ atendimento.data.strftime('%d/%m/%Y') }}</td>
                    <td>{{ atendimento.tarefa }}</td>
                    <td>{{ atendimento.responsavel }}</td>
                    <td>{{ atendimento.total_lojas }}</td>
                    <td>{{ atendimento.assunto }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" class="button-danger" style="width: 100%; max-width: none; margin-top: 20px;">Deletar Selecionados</button>
    </form>
    {% else %}
    <p>Nenhum registro de lançamento em massa encontrado.</p>
    {% endif %}
{% endblock %}